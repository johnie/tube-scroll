<!DOCTYPE html>
<html>
  <head>
    <title>Tube Scroll - Madrid Metro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/app.js"></script>
  </head>
  <body>
    
    <div class="progress"></div>
    
    <div class="metro-title">MADRID METRO</div>
    
    <div class="percentage-indicator">0%</div>
    
    <div class="key">KEY</div>
    
    <div class="key-overlay">
      
      <div class="close-key">X</div>
      
      <p>CLICK OR TAP TO HIDE</p>
      
      <button id="line-one-btn">Line 1</button>  
      <button id="line-two-btn">Line 2</button> 
      <button id="line-three-btn">Line 3</button>
      <button id="line-four-btn">Line 4</button>
      <button id="line-five-btn">Line 5</button>  
      <button id="line-six-btn">Line 6</button> 
      <button id="line-seven-btn">Line 7</button>
      <button id="line-eight-btn">Line 8</button>
      <button id="line-nine-btn">Line 9</button>
      <button id="line-ten-btn">Line 10</button> 
      <button id="line-eleven-btn">Line 11</button>
      <button id="line-twelve-btn">Line 12</button>
      <button id="line-r-btn">Line R</button>
      
    </div>
    
    <div class="info">INFO</div>
    
    <div class="info-overlay">
      
      <div class="close-info">X</div>
      
      <p class="info-title-text">MADRID METRO</p>
      <p>13 Lines</p>
      <p>300 Stations</p>
      <p>Established in 1919</p>
      <p>System length - 182.1mi (293km)</p>
      
      <p>
        <a href="http://en.m.wikipedia.org/wiki/Madrid_Metro" target="_blank">Madrid Metro Wikipedia Page</a>
      </p>
        
    </div>
    
    <a class="back" href="index.html">BACK</a>
    
    <svg width="2000px" height="1350px" viewBox="0 0 2000 1350" version="1.1">
      <g stroke="none" stroke-width="6" fill="none" fill-rule="evenodd" stroke-linecap="rounds">
        <path d="M1107.26266,382.11747 L1076.80321,382.11747 L1059.12115,399.586501 L974.050873,399.586502 L974.050873,429.794129 L954.302944,429.794129 L904.940239,479.310738 L904.940239,536.835884 L941.584026,573.728584 L941.584026,754.288765 L1112.64124,925.590614 L1112.64124,1039.4586 L1148.15542,1074.68583" id="line-one" stroke="#4BBCCC"></path>
        <path d="M903.315546,540.275095 L903.315546,763.504138 L1009.385,763.504138 L1140.86419,632.321589 L1154.10659,632.321589 L1246.07279,726.141375 L1316.66032,726.141375" id="line-two" stroke="#D0011B"></path>
        <path d="M800.843208,618.67711 L947.977837,766.419374 L947.977841,827.063509 L975.556526,854.861604 L975.913536,941.28203 L937.040215,980.483873 L937.040215,1065.87206 L913.348068,1089.69374" id="line-three" stroke="#F8C71C"></path>
        <path d="M815.559852,634.196346 L939.207427,634.196346 L984.971503,680.204067 L1090.14018,680.204076 L1090.14017,619.45071 L1065.48801,594.72401 L1184.72584,475.581935 L1184.72584,404.895048 L1161.8133,382.111293 L1107.26847,382.111293" id="line-four" stroke="#BD5E21"></path>
        <path d="M769.568823,790.474563 L769.568823,913.116439 L794.743372,938.277663 L825.790277,938.277663 L938.385366,825.672927 L903.689651,791.357015 L903.319052,764.322494 L1037.21024,628.843543 L1225.51508,628.843543 L1334.95841,519.272863" id="line-five" stroke="#72BF1D"></path>
        <path d="M797.322899,567.263761 L797.322899,620.801074 L811.028465,634.574077 L811.028465,667.412074 L852.241868,708.498775 L852.241868,741.683422 L797.322899,796.635433 L797.322899,863.397999 L877.916024,942.21014 L1005.15154,942.21014 L1134.22582,813.282466 L1134.22582,672.947673 L998.194909,537.01541 L827.682322,537.01541 L797.322899,567.263761 Z" id="line-six" stroke="#B1ADAD"></path>
        <path d="M843.128082,300.140559 L843.128082,576.52151 L861.214675,594.793758 L1190.05618,594.407619 L1264.82352,669.230861 L1335.85397,669.230861 L1434.74277,767.408626" id="line-seven" stroke="#E8960F"></path>
        <path d="M982.52838,526.203257 L1064.69399,444.231089 L1298.46489,444.231089 L1343.03581,399.67885 L1343.03581,349.833795" id="line-eight" stroke="#E78ECD"></path>
        <path d="M894.36237,320.098277 L894.36237,352.266713 L971.921895,429.700114 L1009.93424,429.700114 L1058.98533,480.038706 L1058.98533,711.107676 L1378.23639,1030.24781" id="line-nine" stroke="#85099E"></path>
        <path d="M1160.43664,92.4365421 L1051.27496,201.636241 L1031.12243,201.636241 L968.104215,265.298954 L968.104215,329.953418 L979.875394,342.139667 L979.875394,680.896259 L878.083554,680.896259 L701.092526,857.851215 L701.092526,882.796527 L607.581007,976.007953 L607.581007,1039.74666" id="line-ten" stroke="#1A5AAB"></path>
        <path d="M707.765878,991.308098 L729.509198,1013.07878 L841.143065,1013.07878 L911.210402,943.155228" id="line-eleven" stroke="#519700"></path>
        <path d="M560.168967,1041.19923 L662.462188,1041.19923 L729.554229,1108.20817 L819.729308,1108.20817 L849.13156,1078.85065 L898.350188,1127.90442 L775.268401,1251.00276 L565.313445,1251.00276 L499.763243,1185.39226 L499.763243,1102.8379 L560.168967,1041.19923 Z" id="line-twelve" stroke="#939129"></path>
        <path d="M851.57861,707.843996 L903.307476,764.11096 L851.57861,707.843996 Z" id="line-r" stroke="#000"></path> 
      </g> 
    </svg>
      
 
    <script>
      
      $(document).ready(function () {
      
        //MADRID METRO
        var $lineone = parseInt($("#line-one").css("stroke-dashoffset"), 10);
        var $linetwo = parseInt($("#line-two").css("stroke-dashoffset"), 10);
        var $linethree = parseInt($("#line-three").css("stroke-dashoffset"), 10);
        var $linefour = parseInt($("#line-four").css("stroke-dashoffset"), 10);
        var $linefive = parseInt($("#line-five").css("stroke-dashoffset"), 10);
        var $linesix = parseInt($("#line-six").css("stroke-dashoffset"), 10);
        var $lineseven = parseInt($("#line-seven").css("stroke-dashoffset"), 10);
        var $lineeight = parseInt($("#line-eight").css("stroke-dashoffset"), 10);
        var $linenine = parseInt($("#line-nine").css("stroke-dashoffset"), 10);
        var $lineten = parseInt($("#line-ten").css("stroke-dashoffset"), 10);
        var $lineeleven = parseInt($("#line-eleven").css("stroke-dashoffset"), 10);
        var $linetwelve = parseInt($("#line-twelve").css("stroke-dashoffset"), 10);
        var $liner = parseInt($("#line-r").css("stroke-dashoffset"), 10);
        
        //on a scroll event - execute function
        $(window).on('scroll', function () {    

          var a = $(window).scrollTop();
          var b = $("html").height();  
          //$(window).height() returns the document for some reason
          //so using vanilla JS instead
          var c = window.innerHeight;

          //calculate how far down the page the user is 
          var $percentComp = ( ( a / ( b - c ) ) * 100 );    

          //set the new value of the dashoffset (based on current %) to create the drawing effect   
          //MADRID METRO
          $("#line-one").css("stroke-dashoffset", $lineone-($percentComp*($lineone/100)));
          $("#line-two").css("stroke-dashoffset", $linetwo-($percentComp*($linetwo/100)));
          $("#line-three").css("stroke-dashoffset", $linethree-($percentComp*($linethree/100)));
          $("#line-four").css("stroke-dashoffset", $linefour-($percentComp*($linefour/100)));
          $("#line-five").css("stroke-dashoffset", $linefive-($percentComp*($linefive/100)));
          $("#line-six").css("stroke-dashoffset", $linesix-($percentComp*($linesix/100)));
          $("#line-seven").css("stroke-dashoffset", $lineseven-($percentComp*($lineseven/100)));
          $("#line-eight").css("stroke-dashoffset", $lineeight-($percentComp*($lineeight/100)));
          $("#line-nine").css("stroke-dashoffset", $linenine-($percentComp*($linenine/100)));
          $("#line-ten").css("stroke-dashoffset", $lineten-($percentComp*($lineten/100)));
          $("#line-eleven").css("stroke-dashoffset", $lineeleven-($percentComp*($lineeleven/100)));
          $("#line-twelve").css("stroke-dashoffset", $linetwelve-($percentComp*($linetwelve/100)));
          $("#line-r").css("stroke-dashoffset", $liner-($percentComp*($liner/100)));

          //display the $percentComp variable as a width percentage
          $(".progress").css("width", $percentComp + "%");

          //display the percentage complete in the overlay as a rounded number
          $(".percentage-indicator").text(Math.round($percentComp) + "%");

        });
        
      });
      
    </script>
  </body>
</html>