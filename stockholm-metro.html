<!DOCTYPE html>
<html>
  <head>
    <title>Tube Scroll - Stockholm Metro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="scss/main.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/app.js"></script>
    <meta charset="UTF-8">
  </head>
  <body>
    
    <div class="progress"></div>
    
    <div class="metro-title">STOCKHOLM METRO</div>
    
    <div class="percentage-indicator">0%</div>
    
    <div class="key">KEY</div>
    
    <div class="key-overlay">
      
      <div class="close-key">X</div>
      
      <p>CLICK OR TAP TO HIDE</p>
      
      <button id="t10-btn">Kungsträdgården - Hjulsta</button>  
      <button id="t11-btn">Kungsträdgården - Akalla</button> 
      <button id="t13-btn">Norsborg - Ropsten</button>
      <button id="t14-btn">Fruängen - Mörby centrum</button>
      <button id="t17-btn">Åkeshov - Skarpnäck</button>
      <button id="t18-btn">Alvik - Farsta strand</button>
      <button id="t19-btn">Hässelby strand - Hagsätra</button>
      
    </div>
    
    <div class="info">INFO</div>
    
    <div class="info-overlay">
      
      <div class="close-info">X</div>
      
      <p class="info-title-text">STOCKHOLM METRO</p>
      <p>7 Lines</p>
      <p>100 Stations</p>
      <p>Established in 1950</p>
      <p>System length - 65.7mi (105.7km)</p>
      
      <p>
        <a href="http://en.wikipedia.org/wiki/Stockholm_metro" target="_blank">Stockholm Metro Wikipedia Page</a>
      </p>
        
    </div>
    
    <a class="back" href="index.html">BACK</a>
    
    <svg version="1.1" width="3000px" height="2500px" viewBox="0 0 3000 2500">
      <g transform="translate(800,150)" fill="none"  stroke-linecap="round" stroke-linejoin="round">
        <path id="t10" fill="none" stroke-width="10" stroke="#4a90e2" d="M1363.846,992.538l-16.153-14.615L1140,977.153l-60,64.616l-64.615-1.539L170.77,197.923l-249.231-1.538"/>
        <path id="t11" fill="none" stroke="#4a90e2" stroke-width="10" d="M759.23,787.923v-199.23L587.692,414.846v-220L295.385-97.462"/>
        <path id="t12" fill="none" stroke="#d82333" stroke-width="10" d="M931,66l110,109l-1,226l291,287v156"/>
        <path id="t13" fill="none" stroke="#d82333" stroke-width="10" d="M1482,647v98l-102,102l-48-2l-70,66"/>
        <path id="t14" fill="none" stroke="#d82333" stroke-width="10" d="M632,1797l124-128v-212l266-266h208l26-32"/>
        <path id="t15" fill="none" stroke="#d82333" stroke-width="10" d="M-448,2085h412l152-154v-234l190-188h248l156-156h150"/>
        <path id="t16" fill="none" stroke="#d82333" stroke-width="10" d="M1259.696,902.062l1.637,260.997"/>
        <path id="t17" fill="none" stroke="#508a34" stroke-width="10" d="M1406.667,2142.111v-83.334l-60-64.443v-80l64.444-64.445l-2.223-171.111l66.667-64.443V1501l-222.223-220V846.556l-74.444-74.444L1111.111,771l-60,64.444l1.111,108.889l-95.556,98.889h-65.556l-100-98.889h-610L-73.333,688.777l1.11-98.889l-83.333-81.111l-93.333-1.11l-125.556,128.889"/>
        <path id="t18" fill="none" stroke="#508a34" stroke-width="10" d="M1473.333,1500.334l58,57.332h84l254,256"/>
        <path id="t19" fill="none" stroke="#508a34" stroke-width="10" d="M1393.333,1420.334l1.334,46L1265.333,1597l0.667,164l-202.667,202h-246"/>
      </g>
    </svg>
    
    <script>
      
      $(document).ready(function () {
      
        //STOCKHOLM METRO
        var $t10 = parseInt($("#t10").css("stroke-dashoffset"), 10);
        var $t11 = parseInt($("#t11").css("stroke-dashoffset"), 10);
        var $t12 = parseInt($("#t12").css("stroke-dashoffset"), 10);
        var $t13 = parseInt($("#t13").css("stroke-dashoffset"), 10);
        var $t14 = parseInt($("#t14").css("stroke-dashoffset"), 10);
        var $t15 = parseInt($("#t15").css("stroke-dashoffset"), 10);
        var $t16 = parseInt($("#t16").css("stroke-dashoffset"), 10);
        var $t17 = parseInt($("#t17").css("stroke-dashoffset"), 10);
        var $t18 = parseInt($("#t18").css("stroke-dashoffset"), 10);
        var $t19 = parseInt($("#t19").css("stroke-dashoffset"), 10);

        //on a scroll event - execute function
        $(window).on('scroll', function () {    

          var a = $(window).scrollTop();
          var b = $("html").height();  
          //$(window).height() returns the document for some reason
          //so using vanilla JS instead
          var c = window.innerHeight;

          //calculate how far down the page the user is 
          var $percentComp = ( ( a / ( b - c ) ) * 100 );    

          //set the new value of the dashoffset (based on current %) to create the drawing effect        
          //STOCKHOLM METRO
          $("#t10").css("stroke-dashoffset", $t10-($percentComp*($t10/100)));
          $("#t11").css("stroke-dashoffset", $t11-($percentComp*($t11/100)));
          $("#t12").css("stroke-dashoffset", $t12-($percentComp*($t12/100)));
          $("#t13").css("stroke-dashoffset", $t13-($percentComp*($t13/100)));
          $("#t14").css("stroke-dashoffset", $t14-($percentComp*($t14/100)));
          $("#t15").css("stroke-dashoffset", $t15-($percentComp*($t15/100)));
          $("#t16").css("stroke-dashoffset", $t16-($percentComp*($t16/100)));
          $("#t17").css("stroke-dashoffset", $t17-($percentComp*($t17/100)));
          $("#t18").css("stroke-dashoffset", $t18-($percentComp*($t18/100)));
          $("#t19").css("stroke-dashoffset", $t19-($percentComp*($t19/100)));

          //display the $percentComp variable as a width percentage
          $(".progress").css("width", $percentComp + "%");

          //display the percentage complete in the overlay as a rounded number
          $(".percentage-indicator").text(Math.round($percentComp) + "%");

        });
        
      });
      
    </script>
  </body>
</html>
